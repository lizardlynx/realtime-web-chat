<html>
  <head>
    <title>Chat</title>
    <style>
      div.chat > div {
        width: 50px;
        height: auto;
        border-color: black;
      }
    </style>
    <script>

      //function for sending messages to chat
      function sendMessage(text) {
        const divMessage = document.createElement('div');
        divMessage.innerHTML = `<p>${text.name + ': ' + text.message}</p>`;
        chat.appendChild(divMessage);
      }

      document.addEventListener('DOMContentLoaded', () => {

        const socket = new WebSocket('ws://localhost:8000/'); 

        //elements of html
        const submitMessage = document.getElementById('submit-message');
        const chat = document.getElementById('chat');
        const message = document.getElementById('message');
        const nickname = document.getElementById('nickname');

        //send message
        submitMessage.addEventListener('click', event => {
          event.preventDefault();

          const text = {
            name: nickname.value,
            message: message.value,
          }

          message.value = '';
          socket.send(JSON.stringify(text));
          text.name = 'You';
          sendMessage(text);
        });

        //get message
        socket.onmessage = event => {
          const message = event.data;
          const text = JSON.parse(message);
          sendMessage(text);
        };

      });
    </script>
  </head>

  <body>
    <form>
      <label for="nickname">Nickname:</label>
      <input type="text" name="nickname" id="nickname">

      <input type="text" name="message" id="message">
      <button type="submit" id="submit-message">Submit message</button>

        
    </form>
    <div id="chat"></div>
  </body>
</html>